create database dbBOLETACINE;
-- Poner en uso dbBOLETACINE
USE dbBOLETACINE;
SELECT DATABASE();
SHOW DATABASES;
-- Crear las tablas
CREATE TABLE VENDEDOR
(
CODVEN int AUTO_INCREMENT PRIMARY KEY NOT NULL ,
NOMVEN VARCHAR (15) not NULL,
APEVEN VARCHAR (15) not NULL,
PASVEN VARCHAR (10) not NULL,
NUMVEN CHAR (10) not NULL,
DIRVEN VARCHAR (15)not NULL
);
CREATE TABLE PELICULA
(
CODPEL INT AUTO_INCREMENT PRIMARY KEY NOT NULL,
NOMPEL VARCHAR (50) not NULL,
COSPEL char(10) not NULL,
TIMPEL CHAR(10) not NULL,
FECPEL timestamp NOT NULL DEFAULT current_timestamp(),
GENPEL VARCHAR (20) not NULL,
CLASPEL VARCHAR(20) not NULL,
IDIPEL VARCHAR(20) not NULL
);
CREATE TABLE CLIENTE
(
CODCLI INT AUTO_INCREMENT PRIMARY KEY NOT NULL,
NOMCLI VARCHAR(20)not NULL,
DNICLI CHAR(9)not NULL,
CELCLI CHAR(9)
);
CREATE TABLE VENTAS
(
CODVENT CHAR (4),
CODVEN int,
FECVENT timestamp,
CONSTRAINT CODVENT_PK PRIMARY KEY(CODVENT)
);
CREATE TABLE VENTADETALLE
(
CODDET CHAR (4),
CANTDET INT,
AUDDET CHAR (4),
CODVENT CHAR (4),
CODPEL int,
CONSTRAINT CODDET_PK PRIMARY KEY(CODDET)
);
-- LISTAR LAS TABLAS
SHOW TABLES;
-- Crear las relaciones entre las tablas
ALTER TABLE VENTAS
ADD CONSTRAINT VENDEDOR_VENTAS_CODVEN
FOREIGN KEY (CODVEN) REFERENCES VENDEDOR (CODVEN);

ALTER TABLE VENTADETALLE
ADD CONSTRAINT VENTAS_VENTADETALLE_CODVENT
FOREIGN KEY (CODVENT) REFERENCES VENTAS (CODVENT);

ALTER TABLE VENTADETALLE
ADD CONSTRAINT PELICULA_VENTADETALLE_CODPEL
FOREIGN KEY (CODPEL) REFERENCES PELICULA (CODPEL);
-- Listar relaciones entre tablas
SELECT * 
FROM INFORMATION_SCHEMA.TABLE_CONSTRAINTS 
WHERE table_schema="dbBOLETACINE" 
    AND constraint_type="FOREIGN KEY";
    
INSERT INTO VENDEDOR
(CODVEN, NOMVEN, APEVEN, PASVEN,NUMVEN,DIRVEN)
VALUES
("01", "JUAN", "RODRIGUEZ", "12345","912532123","CALLE JIRON"),
("02", "CARLOS", "SANCHEZ", "54321","934567214","CALLE JIRON"),
("03", "FRANK", "FELIPE", "13421","987456884","CALLE JIRON"),
("04", "peter", "huayallamares", "764845","987456884","CALLE JIRON"),
("05", "mateo", "vidal", "98534","987487584","CALLE JIRON"),
("06", "flavio", "huaman", "88332","987688422","CALLE JIRON"),
("07", "lucas", "lopez", "87655","945688434","CALLE JIRON"),
("08", "drang", "guzman", "09876","987456000","CALLE JIRON"),
("09", "safter", "aliaga", "45672","987453334","CALLE JIRON"),
("10", "erik", "falcon", "13672","987453456","CALLE JIRON");

INSERT INTO PELICULA
(CODPEL, NOMPEL, COSPEL, TIMPEL,FECPEL,GENPEL,CLASPEL,IDIPEL)
VALUES
("1","los fantasticos","12","60","2021-01-13 12:08:22.0","ADULTOS","ACCION","INGLES"),
("2","los ADVENGERS","12","60","2021-01-13 12:08:22.0","ADULTOS","ACCION","INGLES"),
("3","los MAGOS","12","60","2021-01-13 12:08:22.0","ADULTOS","ACCION","INGLES"),
("4","los SSSS","12","60","2021-01-13 12:08:22.0","ADULTOS","ACCION","INGLES"),
("5","los RAS","12","60","2021-01-13 12:08:22.0","ADULTOS","ACCION","INGLES"),
("6","los ASAS","12","60","2021-01-13 12:08:22.0","ADULTOS","ACCION","INGLES"),
("7","THROM","12","60","2021-01-13 12:08:22.0","ADULTOS","ACCION","INGLES"),
("8","OPERACION OVERWORD","12","60","2021-01-13 12:08:22.0","ADULTOS","ACCION","INGLES"),
("9","MAESTROS","12","60","2021-01-13 12:08:22.0","ADULTOS","ACCION","INGLES"),
("10","los FANATICOS","12","60","2021-01-13 12:08:22.0","ADULTOS","ACCION","INGLES");

INSERT INTO CLIENTE
(CODCLI, NOMCLI, DNICLI, CELCLI)
VALUES
("01","EDGARD","72717476","912618335"),
("02","JUAN","7777777","912618335"),
("03","PERES","7777777","912618335"),
("04","LUCS","7777777","912618335"),
("05","JORGE","7777777","912618335"),
("06","FERNANDO","7777777","912618335"),
("07","ALEXA","7777777","912618335"),
("08","PAOLA","7777777","912618335"),
("09","JULIUS","7777777","912618335");
